document.addEventListener("DOMContentLoaded",function(){var e,a,n,l,c,t=document.querySelector(".js-slider"),o=document.querySelector(".button-address"),r=document.querySelector(".popup-window"),s=r.querySelector(".cross"),u=r.querySelector(".popup-form"),i=r.querySelector(".name"),d=r.querySelector(".email"),p=r.querySelector(".textarea"),v=!0,m="";function f(s){c.forEach(function(e,t){var o,r;s===t?(l[r=t].classList.add(a),c[r].classList.add(n)):(l[o=t].classList.remove(a),c[o].classList.remove(n))})}function L(){r.classList.remove("popup-window-show"),r.classList.remove("popup-window-error")}function w(){r.classList.remove("popup-window-error"),r.offsetWidth,r.classList.add("popup-window-error")}u.noValidate=!0,t&&(a="slide_current",n="current",l=(e=t).querySelectorAll(".js-slider-track li"),(c=e.querySelectorAll(".js-slider-controls button")).forEach(function(e,t){e.addEventListener("click",function(){f(t)})}));try{m=localStorage.getItem("name"),localStorage.getItem("email")}catch(e){v=!1}o.addEventListener("click",function(e){e.preventDefault(),r.classList.add("popup-window-show"),m&&(i.value=m),d.focus()}),s.addEventListener("click",function(e){e.preventDefault(),L()}),u.addEventListener("submit",function(e){i.value?(i.classList.remove("popup-error"),v&&localStorage.setItem("name",i.value)):(e.preventDefault(),w(),i.classList.add("popup-error")),d.value?(d.classList.remove("popup-error"),v&&localStorage.setItem("email",d.value)):(e.preventDefault(),w(),d.classList.add("popup-error")),p.value?p.classList.remove("popup-error"):(e.preventDefault(),w(),p.classList.add("popup-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&r.classList.contains("popup-window-show")&&(e.preventDefault(),L())})});